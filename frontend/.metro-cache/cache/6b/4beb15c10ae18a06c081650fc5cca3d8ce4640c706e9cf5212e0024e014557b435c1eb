{"dependencies":[{"name":"@babel/runtime/helpers/objectWithoutPropertiesLoose","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"HFkXuFcBAqfzGtqyPj8g62MKT0M=","exportNames":["*"],"imports":1}},{"name":"expo-modules-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":61,"index":61}}],"key":"fU8WLIPqoAGygnPbZ/QJiQQfXEY=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":62},"end":{"line":2,"column":31,"index":93}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./ReactNativeMobileWhepClient.types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":94},"end":{"line":3,"column":66,"index":160}}],"key":"56egNxvbyiTz563/qIEiWchcgMQ=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  const _excluded = [\"ref\"];\n  var _jsxFileName = \"/app/frontend/node_modules/react-native-whip-whep/build/ReactNativeMobileWhipClientView.js\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  exports.WhipClientView = WhipClientView;\n  var _babelRuntimeHelpersObjectWithoutPropertiesLoose = require(_dependencyMap[0], \"@babel/runtime/helpers/objectWithoutPropertiesLoose\");\n  var _objectWithoutPropertiesLoose = _interopDefault(_babelRuntimeHelpersObjectWithoutPropertiesLoose);\n  var _expoModulesCore = require(_dependencyMap[1], \"expo-modules-core\");\n  var _react = require(_dependencyMap[2], \"react\");\n  var React = _interopNamespace(_react);\n  var _ReactNativeMobileWhepClientTypes = require(_dependencyMap[3], \"./ReactNativeMobileWhepClient.types\");\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const NativeViewBase = (0, _expoModulesCore.requireNativeViewManager)(\"ReactNativeMobileWhipClientViewModule\");\n  const NativeView = NativeViewBase;\n  /**\n   * A component that renders a native view for WHIP player type.\n   *\n   * This component accepts style and other props defined in\n   * ReactNativeMobileWhipClientViewProps.\n   *\n   * @param {ReactNativeMobileWhipClientViewProps & { ref?: React.Ref<WhipClientViewRef> }} props - The properties to customize the component.\n   * @returns {JSX.Element} The rendered component.\n   */\n  function WhipClientView(props) {\n    const {\n        ref\n      } = props,\n      rest = (0, _objectWithoutPropertiesLoose.default)(props, _excluded);\n    const nativeRef = React.useRef(null);\n    /**\n     * WORKAROUND: Race condition with Expo's ConcurrentFunctionDefinition\n     *\n     * The native view is created on a different queue than the function initialization,\n     * which can cause `initializeCamera` to be called before the view is fully created.\n     *\n     * This results in the following error:\n     * ```\n     * Error: Calling the 'initializeCamera' function has failed\n     *   Caused by: The 1st argument cannot be cast to type View<ReactNativeMobileWhipClientView>\n     *   Caused by: Unable to find the 'ReactNativeMobileWhipClientView' view with tag '122'\n     *   code: 'ERR_ARGUMENT_CAST'\n     * ```\n     *\n     * The `setTimeout(0)` defers execution to the next event loop tick, which seems like enough for the view to be created.\n     *\n     * This is the how they are trying to solving as of writing this comment: https://github.com/expo/expo/blob/3f3ad4f6f9ea096bb003c4345f0a09f2a41b3f25/packages/expo-modules-core/ios/Core/Functions/AsyncFunctionDefinition.swift#L125\n     * This might get fixed in the future and setTimeout won't be needed anymore.\n     */\n    React.useImperativeHandle(ref, () => ({\n      initializeCamera: async options => {\n        return new Promise((resolve, reject) => {\n          setTimeout(() => {\n            nativeRef.current?.initializeCamera(options).then(() => {\n              resolve();\n            }).catch(error => {\n              reject(error);\n            });\n          }, 0);\n        });\n      },\n      connect: async options => {\n        await nativeRef.current?.connect(options);\n      },\n      disconnect: async () => {\n        await nativeRef.current?.disconnect();\n      },\n      switchCamera: async deviceId => {\n        await nativeRef.current?.switchCamera(deviceId);\n      },\n      flipCamera: async () => {\n        await nativeRef.current?.flipCamera();\n      },\n      setPreferredSenderVideoCodecs: async preferredCodecs => {\n        await nativeRef.current?.setPreferredSenderVideoCodecs(preferredCodecs);\n      },\n      setPreferredSenderAudioCodecs: async preferredCodecs => {\n        await nativeRef.current?.setPreferredSenderAudioCodecs(preferredCodecs);\n      },\n      getSupportedSenderVideoCodecsNames: async () => {\n        return (await nativeRef.current?.getSupportedSenderVideoCodecsNames()) ?? [];\n      },\n      getSupportedSenderAudioCodecsNames: async () => {\n        return (await nativeRef.current?.getSupportedSenderAudioCodecsNames()) ?? [];\n      },\n      currentCameraDeviceId: async () => {\n        return (await nativeRef.current?.currentCameraDeviceId()) ?? \"\";\n      }\n    }));\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(NativeView, Object.assign({}, rest, {\n      playerType: _ReactNativeMobileWhepClientTypes.PlayerType.WHIP,\n      ref: nativeRef\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 12\n    }, this);\n  }\n});","lineCount":122,"map":[[29,2,15,0,"exports"],[29,9,15,0],[29,10,15,0,"WhipClientView"],[29,24,15,0],[29,27,15,0,"WhipClientView"],[29,41,15,0],[30,2,81,1],[30,6,81,1,"_babelRuntimeHelpersObjectWithoutPropertiesLoose"],[30,54,81,1],[30,57,81,1,"require"],[30,64,81,1],[30,65,81,1,"_dependencyMap"],[30,79,81,1],[31,2,81,1],[31,6,81,1,"_objectWithoutPropertiesLoose"],[31,35,81,1],[31,38,81,1,"_interopDefault"],[31,53,81,1],[31,54,81,1,"_babelRuntimeHelpersObjectWithoutPropertiesLoose"],[31,102,81,1],[32,2,1,0],[32,6,1,0,"_expoModulesCore"],[32,22,1,0],[32,25,1,0,"require"],[32,32,1,0],[32,33,1,0,"_dependencyMap"],[32,47,1,0],[33,2,2,0],[33,6,2,0,"_react"],[33,12,2,0],[33,15,2,0,"require"],[33,22,2,0],[33,23,2,0,"_dependencyMap"],[33,37,2,0],[34,2,2,0],[34,6,2,0,"React"],[34,11,2,0],[34,14,2,0,"_interopNamespace"],[34,31,2,0],[34,32,2,0,"_react"],[34,38,2,0],[35,2,3,0],[35,6,3,0,"_ReactNativeMobileWhepClientTypes"],[35,39,3,0],[35,42,3,0,"require"],[35,49,3,0],[35,50,3,0,"_dependencyMap"],[35,64,3,0],[36,2,3,66],[36,6,3,66,"_reactJsxDevRuntime"],[36,25,3,66],[36,28,3,66,"require"],[36,35,3,66],[36,36,3,66,"_dependencyMap"],[36,50,3,66],[37,2,4,0],[37,8,4,6,"NativeViewBase"],[37,22,4,20],[37,25,4,23],[37,29,4,23,"requireNativeViewManager"],[37,45,4,47],[37,46,4,47,"requireNativeViewManager"],[37,70,4,47],[37,72,4,48],[37,111,4,87],[37,112,4,88],[38,2,5,0],[38,8,5,6,"NativeView"],[38,18,5,16],[38,21,5,19,"NativeViewBase"],[38,35,5,33],[39,2,6,0],[40,0,7,0],[41,0,8,0],[42,0,9,0],[43,0,10,0],[44,0,11,0],[45,0,12,0],[46,0,13,0],[47,0,14,0],[48,2,15,7],[48,11,15,16,"WhipClientView"],[48,25,15,30,"WhipClientView"],[48,26,15,31,"props"],[48,31,15,36],[48,33,15,38],[49,4,16,4],[49,10,16,10],[50,8,16,12,"ref"],[51,6,16,25],[51,7,16,26],[51,10,16,29,"props"],[51,15,16,34],[52,6,16,20,"rest"],[52,10,16,24],[52,17,16,24,"_objectWithoutPropertiesLoose"],[52,46,16,24],[52,47,16,24,"default"],[52,54,16,24],[52,56,16,29,"props"],[52,61,16,34],[52,63,16,34,"_excluded"],[52,72,16,34],[53,4,17,4],[53,10,17,10,"nativeRef"],[53,19,17,19],[53,22,17,22,"React"],[53,27,17,27],[53,28,17,28,"useRef"],[53,34,17,34],[53,35,17,35],[53,39,17,39],[53,40,17,40],[54,4,18,4],[55,0,19,0],[56,0,20,0],[57,0,21,0],[58,0,22,0],[59,0,23,0],[60,0,24,0],[61,0,25,0],[62,0,26,0],[63,0,27,0],[64,0,28,0],[65,0,29,0],[66,0,30,0],[67,0,31,0],[68,0,32,0],[69,0,33,0],[70,0,34,0],[71,0,35,0],[72,0,36,0],[73,4,37,4,"React"],[73,9,37,9],[73,10,37,10,"useImperativeHandle"],[73,29,37,29],[73,30,37,30,"ref"],[73,33,37,33],[73,35,37,35],[73,42,37,42],[74,6,38,8,"initializeCamera"],[74,22,38,24],[74,24,38,26],[74,30,38,33,"options"],[74,37,38,40],[74,41,38,45],[75,8,39,12],[75,15,39,19],[75,19,39,23,"Promise"],[75,26,39,30],[75,27,39,31],[75,28,39,32,"resolve"],[75,35,39,39],[75,37,39,41,"reject"],[75,43,39,47],[75,48,39,52],[76,10,40,16,"setTimeout"],[76,20,40,26],[76,21,40,27],[76,27,40,33],[77,12,41,20,"nativeRef"],[77,21,41,29],[77,22,41,30,"current"],[77,29,41,37],[77,31,42,26,"initializeCamera"],[77,47,42,42],[77,48,42,43,"options"],[77,55,42,50],[77,56,42,51],[77,57,43,25,"then"],[77,61,43,29],[77,62,43,30],[77,68,43,36],[78,14,44,24,"resolve"],[78,21,44,31],[78,22,44,32],[78,23,44,33],[79,12,45,20],[79,13,45,21],[79,14,45,22],[79,15,46,25,"catch"],[79,20,46,30],[79,21,46,32,"error"],[79,26,46,37],[79,30,46,42],[80,14,47,24,"reject"],[80,20,47,30],[80,21,47,31,"error"],[80,26,47,36],[80,27,47,37],[81,12,48,20],[81,13,48,21],[81,14,48,22],[82,10,49,16],[82,11,49,17],[82,13,49,19],[82,14,49,20],[82,15,49,21],[83,8,50,12],[83,9,50,13],[83,10,50,14],[84,6,51,8],[84,7,51,9],[85,6,52,8,"connect"],[85,13,52,15],[85,15,52,17],[85,21,52,24,"options"],[85,28,52,31],[85,32,52,36],[86,8,53,12],[86,14,53,18,"nativeRef"],[86,23,53,27],[86,24,53,28,"current"],[86,31,53,35],[86,33,53,37,"connect"],[86,40,53,44],[86,41,53,45,"options"],[86,48,53,52],[86,49,53,53],[87,6,54,8],[87,7,54,9],[88,6,55,8,"disconnect"],[88,16,55,18],[88,18,55,20],[88,24,55,20,"disconnect"],[88,25,55,20],[88,30,55,32],[89,8,56,12],[89,14,56,18,"nativeRef"],[89,23,56,27],[89,24,56,28,"current"],[89,31,56,35],[89,33,56,37,"disconnect"],[89,43,56,47],[89,44,56,48],[89,45,56,49],[90,6,57,8],[90,7,57,9],[91,6,58,8,"switchCamera"],[91,18,58,20],[91,20,58,22],[91,26,58,29,"deviceId"],[91,34,58,37],[91,38,58,42],[92,8,59,12],[92,14,59,18,"nativeRef"],[92,23,59,27],[92,24,59,28,"current"],[92,31,59,35],[92,33,59,37,"switchCamera"],[92,45,59,49],[92,46,59,50,"deviceId"],[92,54,59,58],[92,55,59,59],[93,6,60,8],[93,7,60,9],[94,6,61,8,"flipCamera"],[94,16,61,18],[94,18,61,20],[94,24,61,20,"flipCamera"],[94,25,61,20],[94,30,61,32],[95,8,62,12],[95,14,62,18,"nativeRef"],[95,23,62,27],[95,24,62,28,"current"],[95,31,62,35],[95,33,62,37,"flipCamera"],[95,43,62,47],[95,44,62,48],[95,45,62,49],[96,6,63,8],[96,7,63,9],[97,6,64,8,"setPreferredSenderVideoCodecs"],[97,35,64,37],[97,37,64,39],[97,43,64,46,"preferredCodecs"],[97,58,64,61],[97,62,64,66],[98,8,65,12],[98,14,65,18,"nativeRef"],[98,23,65,27],[98,24,65,28,"current"],[98,31,65,35],[98,33,65,37,"setPreferredSenderVideoCodecs"],[98,62,65,66],[98,63,65,67,"preferredCodecs"],[98,78,65,82],[98,79,65,83],[99,6,66,8],[99,7,66,9],[100,6,67,8,"setPreferredSenderAudioCodecs"],[100,35,67,37],[100,37,67,39],[100,43,67,46,"preferredCodecs"],[100,58,67,61],[100,62,67,66],[101,8,68,12],[101,14,68,18,"nativeRef"],[101,23,68,27],[101,24,68,28,"current"],[101,31,68,35],[101,33,68,37,"setPreferredSenderAudioCodecs"],[101,62,68,66],[101,63,68,67,"preferredCodecs"],[101,78,68,82],[101,79,68,83],[102,6,69,8],[102,7,69,9],[103,6,70,8,"getSupportedSenderVideoCodecsNames"],[103,40,70,42],[103,42,70,44],[103,48,70,44,"getSupportedSenderVideoCodecsNames"],[103,49,70,44],[103,54,70,56],[104,8,71,12],[104,15,71,20],[104,16,71,21],[104,22,71,27,"nativeRef"],[104,31,71,36],[104,32,71,37,"current"],[104,39,71,44],[104,41,71,46,"getSupportedSenderVideoCodecsNames"],[104,75,71,80],[104,76,71,81],[104,77,71,82],[104,82,71,87],[104,84,71,89],[105,6,72,8],[105,7,72,9],[106,6,73,8,"getSupportedSenderAudioCodecsNames"],[106,40,73,42],[106,42,73,44],[106,48,73,44,"getSupportedSenderAudioCodecsNames"],[106,49,73,44],[106,54,73,56],[107,8,74,12],[107,15,74,20],[107,16,74,21],[107,22,74,27,"nativeRef"],[107,31,74,36],[107,32,74,37,"current"],[107,39,74,44],[107,41,74,46,"getSupportedSenderAudioCodecsNames"],[107,75,74,80],[107,76,74,81],[107,77,74,82],[107,82,74,87],[107,84,74,89],[108,6,75,8],[108,7,75,9],[109,6,76,8,"currentCameraDeviceId"],[109,27,76,29],[109,29,76,31],[109,35,76,31,"currentCameraDeviceId"],[109,36,76,31],[109,41,76,43],[110,8,77,12],[110,15,77,19],[110,16,77,20],[110,22,77,26,"nativeRef"],[110,31,77,35],[110,32,77,36,"current"],[110,39,77,43],[110,41,77,45,"currentCameraDeviceId"],[110,62,77,66],[110,63,77,67],[110,64,77,68],[110,69,77,73],[110,71,77,75],[111,6,78,8],[112,4,79,4],[112,5,79,5],[112,6,79,6],[112,7,79,7],[113,4,80,4],[113,24,80,11],[113,28,80,11,"_reactJsxDevRuntime"],[113,47,80,11],[113,48,80,11,"jsxDEV"],[113,54,80,11],[113,56,80,12,"NativeView"],[113,66,80,22],[113,68,80,22,"Object"],[113,74,80,22],[113,75,80,22,"assign"],[113,81,80,22],[113,86,80,27,"rest"],[113,90,80,31],[114,6,80,33,"playerType"],[114,16,80,43],[114,18,80,45,"PlayerType"],[114,51,80,55],[114,52,80,55,"PlayerType"],[114,62,80,55],[114,63,80,56,"WHIP"],[114,67,80,61],[115,6,80,62,"ref"],[115,9,80,65],[115,11,80,67,"nativeRef"],[116,4,80,77],[117,6,80,77,"fileName"],[117,14,80,77],[117,16,80,77,"_jsxFileName"],[117,28,80,77],[118,6,80,77,"lineNumber"],[118,16,80,77],[119,6,80,77,"columnNumber"],[119,18,80,77],[120,4,80,77],[120,11,80,78],[120,12,80,79],[121,2,81,0],[122,0,81,1],[122,3]],"functionMap":{"names":["<global>","WhipClientView","React.useImperativeHandle$argument_1","initializeCamera","Promise$argument_0","setTimeout$argument_0","nativeRef.current.initializeCamera.then$argument_0","nativeRef.current.initializeCamera.then._catch$argument_0","connect","disconnect","switchCamera","flipCamera","setPreferredSenderVideoCodecs","setPreferredSenderAudioCodecs","getSupportedSenderVideoCodecsNames","getSupportedSenderAudioCodecsNames","currentCameraDeviceId"],"mappings":"AAA;OCc;mCCsB;0BCC;+BCC;2BCC;8BCG;qBDE;+BEC;qBFE;iBDC;aDC;SDC;iBMC;SNE;oBOC;SPE;sBQC;SRE;oBSC;STE;uCUC;SVE;uCWC;SXE;4CYC;SZE;4CaC;SbE;+BcC;SdE;MDC;CDE"},"hasCjsExports":false},"type":"js/module"}]}
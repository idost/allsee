{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"API_BASE\", {\n    enumerable: true,\n    get: function () {\n      return API_BASE;\n    }\n  });\n  exports.apiGet = apiGet;\n  exports.apiPost = apiPost;\n  exports.followUser = followUser;\n  exports.unfollowUser = unfollowUser;\n  exports.getFollowStatus = getFollowStatus;\n  exports.presenceWatch = presenceWatch;\n  exports.presenceLeave = presenceLeave;\n  exports.getEventPresence = getEventPresence;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  const BASE = process.env.EXPO_BACKEND_URL || _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || \"\";\n  const API_BASE = BASE.endsWith(\"/\") ? BASE.slice(0, -1) : BASE;\n  function buildUrl(path) {\n    if (!path.startsWith(\"/\")) path = `/${path}`;\n    return `${API_BASE}${path}`;\n  }\n  async function apiGet(path) {\n    const res = await fetch(buildUrl(path));\n    if (!res.ok) throw new Error(`${res.status}`);\n    return res.json();\n  }\n  async function apiPost(path, body, init) {\n    const res = await fetch(buildUrl(path), Object.assign({\n      method: \"POST\",\n      headers: Object.assign({\n        \"Content-Type\": \"application/json\"\n      }, init?.headers || {}),\n      body: body ? JSON.stringify(body) : undefined\n    }, init || {}));\n    if (!res.ok) throw new Error(`${res.status}`);\n    return res.json();\n  }\n\n  // Social graph\n  async function followUser(followerId, followingId) {\n    return apiPost(\"/api/follows\", {\n      follower_id: followerId,\n      following_id: followingId,\n      action: \"follow\"\n    });\n  }\n  async function unfollowUser(followerId, followingId) {\n    return apiPost(\"/api/follows\", {\n      follower_id: followerId,\n      following_id: followingId,\n      action: \"unfollow\"\n    });\n  }\n  async function getFollowStatus(followerId, followingId) {\n    return apiGet(`/api/follows/status?follower_id=${encodeURIComponent(followerId)}&following_id=${encodeURIComponent(followingId)}`);\n  }\n\n  // Presence\n  async function presenceWatch(userId, eventId) {\n    return apiPost(\"/api/presence/watch\", {\n      user_id: userId,\n      event_id: eventId\n    });\n  }\n  async function presenceLeave(userId, eventId) {\n    return apiPost(\"/api/presence/leave\", {\n      user_id: userId,\n      event_id: eventId\n    });\n  }\n  async function getEventPresence(eventId, userId) {\n    const q = userId ? `?user_id=${encodeURIComponent(userId)}` : \"\";\n    return apiGet(`/api/events/${eventId}/presence${q}`);\n  }\n});","lineCount":81,"map":[[7,2,2,0,"Object"],[7,8,2,0],[7,9,2,0,"defineProperty"],[7,23,2,0],[7,24,2,0,"exports"],[7,31,2,0],[8,4,2,0,"enumerable"],[8,14,2,0],[9,4,2,0,"get"],[9,7,2,0],[9,18,2,0,"get"],[9,19,2,0],[10,6,2,0],[10,13,2,0,"API_BASE"],[10,21,2,0],[11,4,2,0],[12,2,2,0],[13,2,9,0,"exports"],[13,9,9,0],[13,10,9,0,"apiGet"],[13,16,9,0],[13,19,9,0,"apiGet"],[13,25,9,0],[14,2,15,0,"exports"],[14,9,15,0],[14,10,15,0,"apiPost"],[14,17,15,0],[14,20,15,0,"apiPost"],[14,27,15,0],[15,2,27,0,"exports"],[15,9,27,0],[15,10,27,0,"followUser"],[15,20,27,0],[15,23,27,0,"followUser"],[15,33,27,0],[16,2,30,0,"exports"],[16,9,30,0],[16,10,30,0,"unfollowUser"],[16,22,30,0],[16,25,30,0,"unfollowUser"],[16,37,30,0],[17,2,33,0,"exports"],[17,9,33,0],[17,10,33,0,"getFollowStatus"],[17,25,33,0],[17,28,33,0,"getFollowStatus"],[17,43,33,0],[18,2,38,0,"exports"],[18,9,38,0],[18,10,38,0,"presenceWatch"],[18,23,38,0],[18,26,38,0,"presenceWatch"],[18,39,38,0],[19,2,41,0,"exports"],[19,9,41,0],[19,10,41,0,"presenceLeave"],[19,23,41,0],[19,26,41,0,"presenceLeave"],[19,39,41,0],[20,2,44,0,"exports"],[20,9,44,0],[20,10,44,0,"getEventPresence"],[20,26,44,0],[20,29,44,0,"getEventPresence"],[20,45,44,0],[21,2,47,1],[21,6,47,1,"_expoVirtualEnv"],[21,21,47,1],[21,24,47,1,"require"],[21,31,47,1],[21,32,47,1,"_dependencyMap"],[21,46,47,1],[22,2,1,0],[22,8,1,6,"BASE"],[22,12,1,10],[22,15,1,13,"process"],[22,22,1,20],[22,23,1,21,"env"],[22,26,1,24],[22,27,1,25,"EXPO_BACKEND_URL"],[22,43,1,41],[22,47,1,41,"_expoVirtualEnv"],[22,62,1,41],[22,63,1,41,"env"],[22,66,1,41],[22,67,1,41,"EXPO_PUBLIC_BACKEND_URL"],[22,90,1,80],[22,94,1,84],[22,96,1,86],[23,2,2,7],[23,8,2,13,"API_BASE"],[23,16,2,21],[23,19,2,24,"BASE"],[23,23,2,28],[23,24,2,29,"endsWith"],[23,32,2,37],[23,33,2,38],[23,36,2,41],[23,37,2,42],[23,40,2,45,"BASE"],[23,44,2,49],[23,45,2,50,"slice"],[23,50,2,55],[23,51,2,56],[23,52,2,57],[23,54,2,59],[23,55,2,60],[23,56,2,61],[23,57,2,62],[23,60,2,65,"BASE"],[23,64,2,69],[24,2,4,0],[24,11,4,9,"buildUrl"],[24,19,4,17,"buildUrl"],[24,20,4,18,"path"],[24,24,4,30],[24,26,4,32],[25,4,5,2],[25,8,5,6],[25,9,5,7,"path"],[25,13,5,11],[25,14,5,12,"startsWith"],[25,24,5,22],[25,25,5,23],[25,28,5,26],[25,29,5,27],[25,31,5,29,"path"],[25,35,5,33],[25,38,5,36],[25,42,5,40,"path"],[25,46,5,44],[25,48,5,46],[26,4,6,2],[26,11,6,9],[26,14,6,12,"API_BASE"],[26,22,6,20],[26,25,6,23,"path"],[26,29,6,27],[26,31,6,29],[27,2,7,0],[28,2,9,7],[28,17,9,22,"apiGet"],[28,23,9,28,"apiGet"],[28,24,9,32,"path"],[28,28,9,44],[28,30,9,58],[29,4,10,2],[29,10,10,8,"res"],[29,13,10,11],[29,16,10,14],[29,22,10,20,"fetch"],[29,27,10,25],[29,28,10,26,"buildUrl"],[29,36,10,34],[29,37,10,35,"path"],[29,41,10,39],[29,42,10,40],[29,43,10,41],[30,4,11,2],[30,8,11,6],[30,9,11,7,"res"],[30,12,11,10],[30,13,11,11,"ok"],[30,15,11,13],[30,17,11,15],[30,23,11,21],[30,27,11,25,"Error"],[30,32,11,30],[30,33,11,31],[30,36,11,34,"res"],[30,39,11,37],[30,40,11,38,"status"],[30,46,11,44],[30,48,11,46],[30,49,11,47],[31,4,12,2],[31,11,12,9,"res"],[31,14,12,12],[31,15,12,13,"json"],[31,19,12,17],[31,20,12,18],[31,21,12,19],[32,2,13,0],[33,2,15,7],[33,17,15,22,"apiPost"],[33,24,15,29,"apiPost"],[33,25,15,39,"path"],[33,29,15,51],[33,31,15,53,"body"],[33,35,15,63],[33,37,15,65,"init"],[33,41,15,83],[33,43,15,97],[34,4,16,2],[34,10,16,8,"res"],[34,13,16,11],[34,16,16,14],[34,22,16,20,"fetch"],[34,27,16,25],[34,28,16,26,"buildUrl"],[34,36,16,34],[34,37,16,35,"path"],[34,41,16,39],[34,42,16,40],[34,44,16,40,"Object"],[34,50,16,40],[34,51,16,40,"assign"],[34,57,16,40],[35,6,17,4,"method"],[35,12,17,10],[35,14,17,12],[35,20,17,18],[36,6,18,4,"headers"],[36,13,18,11],[36,15,18,11,"Object"],[36,21,18,11],[36,22,18,11,"assign"],[36,28,18,11],[37,8,18,15],[37,22,18,29],[37,24,18,31],[38,6,18,49],[38,9,18,55,"init"],[38,13,18,59],[38,15,18,61,"headers"],[38,22,18,68],[38,26,18,72],[38,27,18,73],[38,28,18,74],[38,29,18,77],[39,6,19,4,"body"],[39,10,19,8],[39,12,19,10,"body"],[39,16,19,14],[39,19,19,17,"JSON"],[39,23,19,21],[39,24,19,22,"stringify"],[39,33,19,31],[39,34,19,32,"body"],[39,38,19,36],[39,39,19,37],[39,42,19,40,"undefined"],[40,4,19,49],[40,7,20,8,"init"],[40,11,20,12],[40,15,20,16],[40,16,20,17],[40,17,20,18],[40,18,21,3],[40,19,21,4],[41,4,22,2],[41,8,22,6],[41,9,22,7,"res"],[41,12,22,10],[41,13,22,11,"ok"],[41,15,22,13],[41,17,22,15],[41,23,22,21],[41,27,22,25,"Error"],[41,32,22,30],[41,33,22,31],[41,36,22,34,"res"],[41,39,22,37],[41,40,22,38,"status"],[41,46,22,44],[41,48,22,46],[41,49,22,47],[42,4,23,2],[42,11,23,9,"res"],[42,14,23,12],[42,15,23,13,"json"],[42,19,23,17],[42,20,23,18],[42,21,23,19],[43,2,24,0],[45,2,26,0],[46,2,27,7],[46,17,27,22,"followUser"],[46,27,27,32,"followUser"],[46,28,27,33,"followerId"],[46,38,27,51],[46,40,27,53,"followingId"],[46,51,27,72],[46,53,27,74],[47,4,28,2],[47,11,28,9,"apiPost"],[47,18,28,16],[47,19,28,17],[47,33,28,31],[47,35,28,33],[48,6,28,35,"follower_id"],[48,17,28,46],[48,19,28,48,"followerId"],[48,29,28,58],[49,6,28,60,"following_id"],[49,18,28,72],[49,20,28,74,"followingId"],[49,31,28,85],[50,6,28,87,"action"],[50,12,28,93],[50,14,28,95],[51,4,28,104],[51,5,28,105],[51,6,28,106],[52,2,29,0],[53,2,30,7],[53,17,30,22,"unfollowUser"],[53,29,30,34,"unfollowUser"],[53,30,30,35,"followerId"],[53,40,30,53],[53,42,30,55,"followingId"],[53,53,30,74],[53,55,30,76],[54,4,31,2],[54,11,31,9,"apiPost"],[54,18,31,16],[54,19,31,17],[54,33,31,31],[54,35,31,33],[55,6,31,35,"follower_id"],[55,17,31,46],[55,19,31,48,"followerId"],[55,29,31,58],[56,6,31,60,"following_id"],[56,18,31,72],[56,20,31,74,"followingId"],[56,31,31,85],[57,6,31,87,"action"],[57,12,31,93],[57,14,31,95],[58,4,31,106],[58,5,31,107],[58,6,31,108],[59,2,32,0],[60,2,33,7],[60,17,33,22,"getFollowStatus"],[60,32,33,37,"getFollowStatus"],[60,33,33,38,"followerId"],[60,43,33,56],[60,45,33,58,"followingId"],[60,56,33,77],[60,58,33,79],[61,4,34,2],[61,11,34,9,"apiGet"],[61,17,34,15],[61,18,34,40],[61,53,34,75,"encodeURIComponent"],[61,71,34,93],[61,72,34,94,"followerId"],[61,82,34,104],[61,83,34,105],[61,100,34,122,"encodeURIComponent"],[61,118,34,140],[61,119,34,141,"followingId"],[61,130,34,152],[61,131,34,153],[61,133,34,155],[61,134,34,156],[62,2,35,0],[64,2,37,0],[65,2,38,7],[65,17,38,22,"presenceWatch"],[65,30,38,35,"presenceWatch"],[65,31,38,36,"userId"],[65,37,38,50],[65,39,38,52,"eventId"],[65,46,38,67],[65,48,38,69],[66,4,39,2],[66,11,39,9,"apiPost"],[66,18,39,16],[66,19,39,17],[66,40,39,38],[66,42,39,40],[67,6,39,42,"user_id"],[67,13,39,49],[67,15,39,51,"userId"],[67,21,39,57],[68,6,39,59,"event_id"],[68,14,39,67],[68,16,39,69,"eventId"],[69,4,39,77],[69,5,39,78],[69,6,39,79],[70,2,40,0],[71,2,41,7],[71,17,41,22,"presenceLeave"],[71,30,41,35,"presenceLeave"],[71,31,41,36,"userId"],[71,37,41,50],[71,39,41,52,"eventId"],[71,46,41,67],[71,48,41,69],[72,4,42,2],[72,11,42,9,"apiPost"],[72,18,42,16],[72,19,42,17],[72,40,42,38],[72,42,42,40],[73,6,42,42,"user_id"],[73,13,42,49],[73,15,42,51,"userId"],[73,21,42,57],[74,6,42,59,"event_id"],[74,14,42,67],[74,16,42,69,"eventId"],[75,4,42,77],[75,5,42,78],[75,6,42,79],[76,2,43,0],[77,2,44,7],[77,17,44,22,"getEventPresence"],[77,33,44,38,"getEventPresence"],[77,34,44,39,"eventId"],[77,41,44,54],[77,43,44,56,"userId"],[77,49,44,71],[77,51,44,73],[78,4,45,2],[78,10,45,8,"q"],[78,11,45,9],[78,14,45,12,"userId"],[78,20,45,18],[78,23,45,21],[78,35,45,33,"encodeURIComponent"],[78,53,45,51],[78,54,45,52,"userId"],[78,60,45,58],[78,61,45,59],[78,63,45,61],[78,66,45,64],[78,68,45,66],[79,4,46,2],[79,11,46,9,"apiGet"],[79,17,46,15],[79,18,46,90],[79,33,46,105,"eventId"],[79,40,46,112],[79,52,46,124,"q"],[79,53,46,125],[79,55,46,127],[79,56,46,128],[80,2,47,0],[81,0,47,1],[81,3]],"functionMap":{"names":["<global>","buildUrl","apiGet","apiPost","followUser","unfollowUser","getFollowStatus","presenceWatch","presenceLeave","getEventPresence"],"mappings":"AAA;ACG;CDG;OEE;CFI;OGE;CHS;OIG;CJE;OKC;CLE;OMC;CNE;OOG;CPE;OQC;CRE;OSC;CTG"},"hasCjsExports":false},"type":"js/module"}]}
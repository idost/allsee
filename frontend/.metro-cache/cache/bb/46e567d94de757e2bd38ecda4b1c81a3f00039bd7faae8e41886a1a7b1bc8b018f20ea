{"dependencies":[{"name":"expo-modules-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":61,"index":61}}],"key":"fU8WLIPqoAGygnPbZ/QJiQQfXEY=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":62},"end":{"line":2,"column":31,"index":93}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./ReactNativeMobileWhepClient.types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":94},"end":{"line":3,"column":66,"index":160}}],"key":"56egNxvbyiTz563/qIEiWchcgMQ=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/node_modules/react-native-whip-whep/build/ReactNativeMobileWhepClientView.js\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  exports.WhepClientView = WhepClientView;\n  var _expoModulesCore = require(_dependencyMap[0], \"expo-modules-core\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var React = _interopNamespace(_react);\n  var _ReactNativeMobileWhepClientTypes = require(_dependencyMap[2], \"./ReactNativeMobileWhepClient.types\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const NativeViewBase = (0, _expoModulesCore.requireNativeViewManager)(\"ReactNativeMobileWhepClientViewModule\");\n  const NativeView = NativeViewBase;\n  /**\n   * A component that renders a native view for WHEP player type.\n   *\n   * This component accepts style and other props defined in\n   * ReactNativeMobileWhepClientViewProps.\n   *\n   * @param {ReactNativeMobileWhepClientViewProps & { ref?: React.Ref<WhepClientViewRef> }} props - The properties to customize the component.\n   * @returns {JSX.Element} The rendered component.\n   */\n  function WhepClientView(props) {\n    const {\n      ref,\n      ...rest\n    } = props;\n    const nativeRef = React.useRef(null);\n    /**\n     * WORKAROUND: Race condition with Expo's ConcurrentFunctionDefinition\n     *\n     * The native view is created on a different queue than the function initialization,\n     * which can cause functions to be called before the view is fully created.\n     *\n     * This results in errors like:\n     * ```\n     * Error: Calling the function has failed\n     *   Caused by: The 1st argument cannot be cast to type View<ReactNativeMobileWhepClientView>\n     *   Caused by: Unable to find the 'ReactNativeMobileWhepClientView' view with tag 'XXX'\n     *   code: 'ERR_ARGUMENT_CAST'\n     * ```\n     *\n     * Additionally, without this workaround, the video renderer may not have a valid surface,\n     * causing \"EglRenderer: Dropping frame - No surface\" errors.\n     *\n     * The `setTimeout(0)` defers execution to the next event loop tick, which seems like enough for the view to be created.\n     *\n     * This is the how they are trying to solving as of writing this comment: https://github.com/expo/expo/blob/3f3ad4f6f9ea096bb003c4345f0a09f2a41b3f25/packages/expo-modules-core/ios/Core/Functions/AsyncFunctionDefinition.swift#L125\n     * This might get fixed in the future and setTimeout won't be needed anymore.\n     */\n    React.useImperativeHandle(ref, () => ({\n      createWhepClient: async (configurationOptions, preferredVideoCodecs, preferredAudioCodecs) => {\n        return new Promise((resolve, reject) => {\n          setTimeout(() => {\n            nativeRef.current?.createWhepClient(configurationOptions, preferredVideoCodecs, preferredAudioCodecs).then(() => {\n              resolve();\n            }).catch(error => {\n              reject(error);\n            });\n          }, 0);\n        });\n      },\n      connect: async options => {\n        await nativeRef.current?.connect(options);\n      },\n      disconnect: async () => {\n        await nativeRef.current?.disconnect();\n      },\n      pause: async () => {\n        await nativeRef.current?.pause();\n      },\n      unpause: async () => {\n        await nativeRef.current?.unpause();\n      },\n      getSupportedReceiverVideoCodecsNames: async () => {\n        return (await nativeRef.current?.getSupportedReceiverVideoCodecsNames()) ?? [];\n      },\n      getSupportedReceiverAudioCodecsNames: async () => {\n        return (await nativeRef.current?.getSupportedReceiverAudioCodecsNames()) ?? [];\n      },\n      setPreferredReceiverVideoCodecs: async preferredCodecs => {\n        await nativeRef.current?.setPreferredReceiverVideoCodecs(preferredCodecs);\n      },\n      setPreferredReceiverAudioCodecs: async preferredCodecs => {\n        await nativeRef.current?.setPreferredReceiverAudioCodecs(preferredCodecs);\n      },\n      startPip: async () => {\n        await nativeRef.current?.startPip();\n      },\n      stopPip: async () => {\n        await nativeRef.current?.stopPip();\n      },\n      togglePip: async () => {\n        await nativeRef.current?.togglePip();\n      }\n    }));\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(NativeView, {\n      ...rest,\n      playerType: _ReactNativeMobileWhepClientTypes.PlayerType.WHEP,\n      ref: nativeRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 12\n    }, this);\n  }\n});","lineCount":124,"map":[[23,2,15,0,"exports"],[23,9,15,0],[23,10,15,0,"WhepClientView"],[23,24,15,0],[23,27,15,0,"WhepClientView"],[23,41,15,0],[24,2,1,0],[24,6,1,0,"_expoModulesCore"],[24,22,1,0],[24,25,1,0,"require"],[24,32,1,0],[24,33,1,0,"_dependencyMap"],[24,47,1,0],[25,2,2,0],[25,6,2,0,"_react"],[25,12,2,0],[25,15,2,0,"require"],[25,22,2,0],[25,23,2,0,"_dependencyMap"],[25,37,2,0],[26,2,2,0],[26,6,2,0,"React"],[26,11,2,0],[26,14,2,0,"_interopNamespace"],[26,31,2,0],[26,32,2,0,"_react"],[26,38,2,0],[27,2,3,0],[27,6,3,0,"_ReactNativeMobileWhepClientTypes"],[27,39,3,0],[27,42,3,0,"require"],[27,49,3,0],[27,50,3,0,"_dependencyMap"],[27,64,3,0],[28,2,3,66],[28,6,3,66,"_reactJsxDevRuntime"],[28,25,3,66],[28,28,3,66,"require"],[28,35,3,66],[28,36,3,66,"_dependencyMap"],[28,50,3,66],[29,2,4,0],[29,8,4,6,"NativeViewBase"],[29,22,4,20],[29,25,4,23],[29,29,4,23,"requireNativeViewManager"],[29,45,4,47],[29,46,4,47,"requireNativeViewManager"],[29,70,4,47],[29,72,4,48],[29,111,4,87],[29,112,4,88],[30,2,5,0],[30,8,5,6,"NativeView"],[30,18,5,16],[30,21,5,19,"NativeViewBase"],[30,35,5,33],[31,2,6,0],[32,0,7,0],[33,0,8,0],[34,0,9,0],[35,0,10,0],[36,0,11,0],[37,0,12,0],[38,0,13,0],[39,0,14,0],[40,2,15,7],[40,11,15,16,"WhepClientView"],[40,25,15,30,"WhepClientView"],[40,26,15,31,"props"],[40,31,15,36],[40,33,15,38],[41,4,16,4],[41,10,16,10],[42,6,16,12,"ref"],[42,9,16,15],[43,6,16,17],[43,9,16,20,"rest"],[44,4,16,25],[44,5,16,26],[44,8,16,29,"props"],[44,13,16,34],[45,4,17,4],[45,10,17,10,"nativeRef"],[45,19,17,19],[45,22,17,22,"React"],[45,27,17,27],[45,28,17,28,"useRef"],[45,34,17,34],[45,35,17,35],[45,39,17,39],[45,40,17,40],[46,4,18,4],[47,0,19,0],[48,0,20,0],[49,0,21,0],[50,0,22,0],[51,0,23,0],[52,0,24,0],[53,0,25,0],[54,0,26,0],[55,0,27,0],[56,0,28,0],[57,0,29,0],[58,0,30,0],[59,0,31,0],[60,0,32,0],[61,0,33,0],[62,0,34,0],[63,0,35,0],[64,0,36,0],[65,0,37,0],[66,0,38,0],[67,0,39,0],[68,4,40,4,"React"],[68,9,40,9],[68,10,40,10,"useImperativeHandle"],[68,29,40,29],[68,30,40,30,"ref"],[68,33,40,33],[68,35,40,35],[68,42,40,42],[69,6,41,8,"createWhepClient"],[69,22,41,24],[69,24,41,26],[69,30,41,26,"createWhepClient"],[69,31,41,33,"configurationOptions"],[69,51,41,53],[69,53,41,55,"preferredVideoCodecs"],[69,73,41,75],[69,75,41,77,"preferredAudioCodecs"],[69,95,41,97],[69,100,41,102],[70,8,42,12],[70,15,42,19],[70,19,42,23,"Promise"],[70,26,42,30],[70,27,42,31],[70,28,42,32,"resolve"],[70,35,42,39],[70,37,42,41,"reject"],[70,43,42,47],[70,48,42,52],[71,10,43,16,"setTimeout"],[71,20,43,26],[71,21,43,27],[71,27,43,33],[72,12,44,20,"nativeRef"],[72,21,44,29],[72,22,44,30,"current"],[72,29,44,37],[72,31,45,26,"createWhepClient"],[72,47,45,42],[72,48,45,43,"configurationOptions"],[72,68,45,63],[72,70,45,65,"preferredVideoCodecs"],[72,90,45,85],[72,92,45,87,"preferredAudioCodecs"],[72,112,45,107],[72,113,45,108],[72,114,46,25,"then"],[72,118,46,29],[72,119,46,30],[72,125,46,36],[73,14,47,24,"resolve"],[73,21,47,31],[73,22,47,32],[73,23,47,33],[74,12,48,20],[74,13,48,21],[74,14,48,22],[74,15,49,25,"catch"],[74,20,49,30],[74,21,49,32,"error"],[74,26,49,37],[74,30,49,42],[75,14,50,24,"reject"],[75,20,50,30],[75,21,50,31,"error"],[75,26,50,36],[75,27,50,37],[76,12,51,20],[76,13,51,21],[76,14,51,22],[77,10,52,16],[77,11,52,17],[77,13,52,19],[77,14,52,20],[77,15,52,21],[78,8,53,12],[78,9,53,13],[78,10,53,14],[79,6,54,8],[79,7,54,9],[80,6,55,8,"connect"],[80,13,55,15],[80,15,55,17],[80,21,55,24,"options"],[80,28,55,31],[80,32,55,36],[81,8,56,12],[81,14,56,18,"nativeRef"],[81,23,56,27],[81,24,56,28,"current"],[81,31,56,35],[81,33,56,37,"connect"],[81,40,56,44],[81,41,56,45,"options"],[81,48,56,52],[81,49,56,53],[82,6,57,8],[82,7,57,9],[83,6,58,8,"disconnect"],[83,16,58,18],[83,18,58,20],[83,24,58,20,"disconnect"],[83,25,58,20],[83,30,58,32],[84,8,59,12],[84,14,59,18,"nativeRef"],[84,23,59,27],[84,24,59,28,"current"],[84,31,59,35],[84,33,59,37,"disconnect"],[84,43,59,47],[84,44,59,48],[84,45,59,49],[85,6,60,8],[85,7,60,9],[86,6,61,8,"pause"],[86,11,61,13],[86,13,61,15],[86,19,61,15,"pause"],[86,20,61,15],[86,25,61,27],[87,8,62,12],[87,14,62,18,"nativeRef"],[87,23,62,27],[87,24,62,28,"current"],[87,31,62,35],[87,33,62,37,"pause"],[87,38,62,42],[87,39,62,43],[87,40,62,44],[88,6,63,8],[88,7,63,9],[89,6,64,8,"unpause"],[89,13,64,15],[89,15,64,17],[89,21,64,17,"unpause"],[89,22,64,17],[89,27,64,29],[90,8,65,12],[90,14,65,18,"nativeRef"],[90,23,65,27],[90,24,65,28,"current"],[90,31,65,35],[90,33,65,37,"unpause"],[90,40,65,44],[90,41,65,45],[90,42,65,46],[91,6,66,8],[91,7,66,9],[92,6,67,8,"getSupportedReceiverVideoCodecsNames"],[92,42,67,44],[92,44,67,46],[92,50,67,46,"getSupportedReceiverVideoCodecsNames"],[92,51,67,46],[92,56,67,58],[93,8,68,12],[93,15,68,20],[93,16,68,21],[93,22,68,27,"nativeRef"],[93,31,68,36],[93,32,68,37,"current"],[93,39,68,44],[93,41,68,46,"getSupportedReceiverVideoCodecsNames"],[93,77,68,82],[93,78,68,83],[93,79,68,84],[93,84,68,89],[93,86,68,91],[94,6,69,8],[94,7,69,9],[95,6,70,8,"getSupportedReceiverAudioCodecsNames"],[95,42,70,44],[95,44,70,46],[95,50,70,46,"getSupportedReceiverAudioCodecsNames"],[95,51,70,46],[95,56,70,58],[96,8,71,12],[96,15,71,20],[96,16,71,21],[96,22,71,27,"nativeRef"],[96,31,71,36],[96,32,71,37,"current"],[96,39,71,44],[96,41,71,46,"getSupportedReceiverAudioCodecsNames"],[96,77,71,82],[96,78,71,83],[96,79,71,84],[96,84,71,89],[96,86,71,91],[97,6,72,8],[97,7,72,9],[98,6,73,8,"setPreferredReceiverVideoCodecs"],[98,37,73,39],[98,39,73,41],[98,45,73,48,"preferredCodecs"],[98,60,73,63],[98,64,73,68],[99,8,74,12],[99,14,74,18,"nativeRef"],[99,23,74,27],[99,24,74,28,"current"],[99,31,74,35],[99,33,74,37,"setPreferredReceiverVideoCodecs"],[99,64,74,68],[99,65,74,69,"preferredCodecs"],[99,80,74,84],[99,81,74,85],[100,6,75,8],[100,7,75,9],[101,6,76,8,"setPreferredReceiverAudioCodecs"],[101,37,76,39],[101,39,76,41],[101,45,76,48,"preferredCodecs"],[101,60,76,63],[101,64,76,68],[102,8,77,12],[102,14,77,18,"nativeRef"],[102,23,77,27],[102,24,77,28,"current"],[102,31,77,35],[102,33,77,37,"setPreferredReceiverAudioCodecs"],[102,64,77,68],[102,65,77,69,"preferredCodecs"],[102,80,77,84],[102,81,77,85],[103,6,78,8],[103,7,78,9],[104,6,79,8,"startPip"],[104,14,79,16],[104,16,79,18],[104,22,79,18,"startPip"],[104,23,79,18],[104,28,79,30],[105,8,80,12],[105,14,80,18,"nativeRef"],[105,23,80,27],[105,24,80,28,"current"],[105,31,80,35],[105,33,80,37,"startPip"],[105,41,80,45],[105,42,80,46],[105,43,80,47],[106,6,81,8],[106,7,81,9],[107,6,82,8,"stopPip"],[107,13,82,15],[107,15,82,17],[107,21,82,17,"stopPip"],[107,22,82,17],[107,27,82,29],[108,8,83,12],[108,14,83,18,"nativeRef"],[108,23,83,27],[108,24,83,28,"current"],[108,31,83,35],[108,33,83,37,"stopPip"],[108,40,83,44],[108,41,83,45],[108,42,83,46],[109,6,84,8],[109,7,84,9],[110,6,85,8,"togglePip"],[110,15,85,17],[110,17,85,19],[110,23,85,19,"togglePip"],[110,24,85,19],[110,29,85,31],[111,8,86,12],[111,14,86,18,"nativeRef"],[111,23,86,27],[111,24,86,28,"current"],[111,31,86,35],[111,33,86,37,"togglePip"],[111,42,86,46],[111,43,86,47],[111,44,86,48],[112,6,87,8],[113,4,88,4],[113,5,88,5],[113,6,88,6],[113,7,88,7],[114,4,89,4],[114,24,89,11],[114,28,89,11,"_reactJsxDevRuntime"],[114,47,89,11],[114,48,89,11,"jsxDEV"],[114,54,89,11],[114,56,89,12,"NativeView"],[114,66,89,22],[115,6,89,22],[115,9,89,27,"rest"],[115,13,89,31],[116,6,89,33,"playerType"],[116,16,89,43],[116,18,89,45,"PlayerType"],[116,51,89,55],[116,52,89,55,"PlayerType"],[116,62,89,55],[116,63,89,56,"WHEP"],[116,67,89,61],[117,6,89,62,"ref"],[117,9,89,65],[117,11,89,67,"nativeRef"],[118,4,89,77],[119,6,89,77,"fileName"],[119,14,89,77],[119,16,89,77,"_jsxFileName"],[119,28,89,77],[120,6,89,77,"lineNumber"],[120,16,89,77],[121,6,89,77,"columnNumber"],[121,18,89,77],[122,4,89,77],[122,11,89,78],[122,12,89,79],[123,2,90,0],[124,0,90,1],[124,3]],"functionMap":{"names":["<global>","WhepClientView","React.useImperativeHandle$argument_1","createWhepClient","Promise$argument_0","setTimeout$argument_0","nativeRef.current.createWhepClient.then$argument_0","nativeRef.current.createWhepClient.then._catch$argument_0","connect","disconnect","pause","unpause","getSupportedReceiverVideoCodecsNames","getSupportedReceiverAudioCodecsNames","setPreferredReceiverVideoCodecs","setPreferredReceiverAudioCodecs","startPip","stopPip","togglePip"],"mappings":"AAA;OCc;mCCyB;0BCC;+BCC;2BCC;8BCG;qBDE;+BEC;qBFE;iBDC;aDC;SDC;iBMC;SNE;oBOC;SPE;eQC;SRE;iBSC;STE;8CUC;SVE;8CWC;SXE;yCYC;SZE;yCaC;SbE;kBcC;SdE;iBeC;SfE;mBgBC;ShBE;MDC;CDE"},"hasCjsExports":false},"type":"js/module"}]}
{"dependencies":[{"name":"@babel/runtime/helpers/objectWithoutPropertiesLoose","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"HFkXuFcBAqfzGtqyPj8g62MKT0M=","exportNames":["*"],"imports":1}},{"name":"expo-modules-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":61,"index":61}}],"key":"fU8WLIPqoAGygnPbZ/QJiQQfXEY=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":62},"end":{"line":2,"column":31,"index":93}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./ReactNativeMobileWhepClient.types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":94},"end":{"line":3,"column":66,"index":160}}],"key":"56egNxvbyiTz563/qIEiWchcgMQ=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  const _excluded = [\"ref\"];\n  var _jsxFileName = \"/app/frontend/node_modules/react-native-whip-whep/build/ReactNativeMobileWhepClientView.js\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  exports.WhepClientView = WhepClientView;\n  var _babelRuntimeHelpersObjectWithoutPropertiesLoose = require(_dependencyMap[0], \"@babel/runtime/helpers/objectWithoutPropertiesLoose\");\n  var _objectWithoutPropertiesLoose = _interopDefault(_babelRuntimeHelpersObjectWithoutPropertiesLoose);\n  var _expoModulesCore = require(_dependencyMap[1], \"expo-modules-core\");\n  var _react = require(_dependencyMap[2], \"react\");\n  var React = _interopNamespace(_react);\n  var _ReactNativeMobileWhepClientTypes = require(_dependencyMap[3], \"./ReactNativeMobileWhepClient.types\");\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const NativeViewBase = (0, _expoModulesCore.requireNativeViewManager)(\"ReactNativeMobileWhepClientViewModule\");\n  const NativeView = NativeViewBase;\n  /**\n   * A component that renders a native view for WHEP player type.\n   *\n   * This component accepts style and other props defined in\n   * ReactNativeMobileWhepClientViewProps.\n   *\n   * @param {ReactNativeMobileWhepClientViewProps & { ref?: React.Ref<WhepClientViewRef> }} props - The properties to customize the component.\n   * @returns {JSX.Element} The rendered component.\n   */\n  function WhepClientView(props) {\n    const {\n        ref\n      } = props,\n      rest = (0, _objectWithoutPropertiesLoose.default)(props, _excluded);\n    const nativeRef = React.useRef(null);\n    /**\n     * WORKAROUND: Race condition with Expo's ConcurrentFunctionDefinition\n     *\n     * The native view is created on a different queue than the function initialization,\n     * which can cause functions to be called before the view is fully created.\n     *\n     * This results in errors like:\n     * ```\n     * Error: Calling the function has failed\n     *   Caused by: The 1st argument cannot be cast to type View<ReactNativeMobileWhepClientView>\n     *   Caused by: Unable to find the 'ReactNativeMobileWhepClientView' view with tag 'XXX'\n     *   code: 'ERR_ARGUMENT_CAST'\n     * ```\n     *\n     * Additionally, without this workaround, the video renderer may not have a valid surface,\n     * causing \"EglRenderer: Dropping frame - No surface\" errors.\n     *\n     * The `setTimeout(0)` defers execution to the next event loop tick, which seems like enough for the view to be created.\n     *\n     * This is the how they are trying to solving as of writing this comment: https://github.com/expo/expo/blob/3f3ad4f6f9ea096bb003c4345f0a09f2a41b3f25/packages/expo-modules-core/ios/Core/Functions/AsyncFunctionDefinition.swift#L125\n     * This might get fixed in the future and setTimeout won't be needed anymore.\n     */\n    React.useImperativeHandle(ref, () => ({\n      createWhepClient: async (configurationOptions, preferredVideoCodecs, preferredAudioCodecs) => {\n        return new Promise((resolve, reject) => {\n          setTimeout(() => {\n            nativeRef.current?.createWhepClient(configurationOptions, preferredVideoCodecs, preferredAudioCodecs).then(() => {\n              resolve();\n            }).catch(error => {\n              reject(error);\n            });\n          }, 0);\n        });\n      },\n      connect: async options => {\n        await nativeRef.current?.connect(options);\n      },\n      disconnect: async () => {\n        await nativeRef.current?.disconnect();\n      },\n      pause: async () => {\n        await nativeRef.current?.pause();\n      },\n      unpause: async () => {\n        await nativeRef.current?.unpause();\n      },\n      getSupportedReceiverVideoCodecsNames: async () => {\n        return (await nativeRef.current?.getSupportedReceiverVideoCodecsNames()) ?? [];\n      },\n      getSupportedReceiverAudioCodecsNames: async () => {\n        return (await nativeRef.current?.getSupportedReceiverAudioCodecsNames()) ?? [];\n      },\n      setPreferredReceiverVideoCodecs: async preferredCodecs => {\n        await nativeRef.current?.setPreferredReceiverVideoCodecs(preferredCodecs);\n      },\n      setPreferredReceiverAudioCodecs: async preferredCodecs => {\n        await nativeRef.current?.setPreferredReceiverAudioCodecs(preferredCodecs);\n      },\n      startPip: async () => {\n        await nativeRef.current?.startPip();\n      },\n      stopPip: async () => {\n        await nativeRef.current?.stopPip();\n      },\n      togglePip: async () => {\n        await nativeRef.current?.togglePip();\n      }\n    }));\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(NativeView, Object.assign({}, rest, {\n      playerType: _ReactNativeMobileWhepClientTypes.PlayerType.WHEP,\n      ref: nativeRef\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 12\n    }, this);\n  }\n});","lineCount":131,"map":[[29,2,15,0,"exports"],[29,9,15,0],[29,10,15,0,"WhepClientView"],[29,24,15,0],[29,27,15,0,"WhepClientView"],[29,41,15,0],[30,2,90,1],[30,6,90,1,"_babelRuntimeHelpersObjectWithoutPropertiesLoose"],[30,54,90,1],[30,57,90,1,"require"],[30,64,90,1],[30,65,90,1,"_dependencyMap"],[30,79,90,1],[31,2,90,1],[31,6,90,1,"_objectWithoutPropertiesLoose"],[31,35,90,1],[31,38,90,1,"_interopDefault"],[31,53,90,1],[31,54,90,1,"_babelRuntimeHelpersObjectWithoutPropertiesLoose"],[31,102,90,1],[32,2,1,0],[32,6,1,0,"_expoModulesCore"],[32,22,1,0],[32,25,1,0,"require"],[32,32,1,0],[32,33,1,0,"_dependencyMap"],[32,47,1,0],[33,2,2,0],[33,6,2,0,"_react"],[33,12,2,0],[33,15,2,0,"require"],[33,22,2,0],[33,23,2,0,"_dependencyMap"],[33,37,2,0],[34,2,2,0],[34,6,2,0,"React"],[34,11,2,0],[34,14,2,0,"_interopNamespace"],[34,31,2,0],[34,32,2,0,"_react"],[34,38,2,0],[35,2,3,0],[35,6,3,0,"_ReactNativeMobileWhepClientTypes"],[35,39,3,0],[35,42,3,0,"require"],[35,49,3,0],[35,50,3,0,"_dependencyMap"],[35,64,3,0],[36,2,3,66],[36,6,3,66,"_reactJsxDevRuntime"],[36,25,3,66],[36,28,3,66,"require"],[36,35,3,66],[36,36,3,66,"_dependencyMap"],[36,50,3,66],[37,2,4,0],[37,8,4,6,"NativeViewBase"],[37,22,4,20],[37,25,4,23],[37,29,4,23,"requireNativeViewManager"],[37,45,4,47],[37,46,4,47,"requireNativeViewManager"],[37,70,4,47],[37,72,4,48],[37,111,4,87],[37,112,4,88],[38,2,5,0],[38,8,5,6,"NativeView"],[38,18,5,16],[38,21,5,19,"NativeViewBase"],[38,35,5,33],[39,2,6,0],[40,0,7,0],[41,0,8,0],[42,0,9,0],[43,0,10,0],[44,0,11,0],[45,0,12,0],[46,0,13,0],[47,0,14,0],[48,2,15,7],[48,11,15,16,"WhepClientView"],[48,25,15,30,"WhepClientView"],[48,26,15,31,"props"],[48,31,15,36],[48,33,15,38],[49,4,16,4],[49,10,16,10],[50,8,16,12,"ref"],[51,6,16,25],[51,7,16,26],[51,10,16,29,"props"],[51,15,16,34],[52,6,16,20,"rest"],[52,10,16,24],[52,17,16,24,"_objectWithoutPropertiesLoose"],[52,46,16,24],[52,47,16,24,"default"],[52,54,16,24],[52,56,16,29,"props"],[52,61,16,34],[52,63,16,34,"_excluded"],[52,72,16,34],[53,4,17,4],[53,10,17,10,"nativeRef"],[53,19,17,19],[53,22,17,22,"React"],[53,27,17,27],[53,28,17,28,"useRef"],[53,34,17,34],[53,35,17,35],[53,39,17,39],[53,40,17,40],[54,4,18,4],[55,0,19,0],[56,0,20,0],[57,0,21,0],[58,0,22,0],[59,0,23,0],[60,0,24,0],[61,0,25,0],[62,0,26,0],[63,0,27,0],[64,0,28,0],[65,0,29,0],[66,0,30,0],[67,0,31,0],[68,0,32,0],[69,0,33,0],[70,0,34,0],[71,0,35,0],[72,0,36,0],[73,0,37,0],[74,0,38,0],[75,0,39,0],[76,4,40,4,"React"],[76,9,40,9],[76,10,40,10,"useImperativeHandle"],[76,29,40,29],[76,30,40,30,"ref"],[76,33,40,33],[76,35,40,35],[76,42,40,42],[77,6,41,8,"createWhepClient"],[77,22,41,24],[77,24,41,26],[77,30,41,26,"createWhepClient"],[77,31,41,33,"configurationOptions"],[77,51,41,53],[77,53,41,55,"preferredVideoCodecs"],[77,73,41,75],[77,75,41,77,"preferredAudioCodecs"],[77,95,41,97],[77,100,41,102],[78,8,42,12],[78,15,42,19],[78,19,42,23,"Promise"],[78,26,42,30],[78,27,42,31],[78,28,42,32,"resolve"],[78,35,42,39],[78,37,42,41,"reject"],[78,43,42,47],[78,48,42,52],[79,10,43,16,"setTimeout"],[79,20,43,26],[79,21,43,27],[79,27,43,33],[80,12,44,20,"nativeRef"],[80,21,44,29],[80,22,44,30,"current"],[80,29,44,37],[80,31,45,26,"createWhepClient"],[80,47,45,42],[80,48,45,43,"configurationOptions"],[80,68,45,63],[80,70,45,65,"preferredVideoCodecs"],[80,90,45,85],[80,92,45,87,"preferredAudioCodecs"],[80,112,45,107],[80,113,45,108],[80,114,46,25,"then"],[80,118,46,29],[80,119,46,30],[80,125,46,36],[81,14,47,24,"resolve"],[81,21,47,31],[81,22,47,32],[81,23,47,33],[82,12,48,20],[82,13,48,21],[82,14,48,22],[82,15,49,25,"catch"],[82,20,49,30],[82,21,49,32,"error"],[82,26,49,37],[82,30,49,42],[83,14,50,24,"reject"],[83,20,50,30],[83,21,50,31,"error"],[83,26,50,36],[83,27,50,37],[84,12,51,20],[84,13,51,21],[84,14,51,22],[85,10,52,16],[85,11,52,17],[85,13,52,19],[85,14,52,20],[85,15,52,21],[86,8,53,12],[86,9,53,13],[86,10,53,14],[87,6,54,8],[87,7,54,9],[88,6,55,8,"connect"],[88,13,55,15],[88,15,55,17],[88,21,55,24,"options"],[88,28,55,31],[88,32,55,36],[89,8,56,12],[89,14,56,18,"nativeRef"],[89,23,56,27],[89,24,56,28,"current"],[89,31,56,35],[89,33,56,37,"connect"],[89,40,56,44],[89,41,56,45,"options"],[89,48,56,52],[89,49,56,53],[90,6,57,8],[90,7,57,9],[91,6,58,8,"disconnect"],[91,16,58,18],[91,18,58,20],[91,24,58,20,"disconnect"],[91,25,58,20],[91,30,58,32],[92,8,59,12],[92,14,59,18,"nativeRef"],[92,23,59,27],[92,24,59,28,"current"],[92,31,59,35],[92,33,59,37,"disconnect"],[92,43,59,47],[92,44,59,48],[92,45,59,49],[93,6,60,8],[93,7,60,9],[94,6,61,8,"pause"],[94,11,61,13],[94,13,61,15],[94,19,61,15,"pause"],[94,20,61,15],[94,25,61,27],[95,8,62,12],[95,14,62,18,"nativeRef"],[95,23,62,27],[95,24,62,28,"current"],[95,31,62,35],[95,33,62,37,"pause"],[95,38,62,42],[95,39,62,43],[95,40,62,44],[96,6,63,8],[96,7,63,9],[97,6,64,8,"unpause"],[97,13,64,15],[97,15,64,17],[97,21,64,17,"unpause"],[97,22,64,17],[97,27,64,29],[98,8,65,12],[98,14,65,18,"nativeRef"],[98,23,65,27],[98,24,65,28,"current"],[98,31,65,35],[98,33,65,37,"unpause"],[98,40,65,44],[98,41,65,45],[98,42,65,46],[99,6,66,8],[99,7,66,9],[100,6,67,8,"getSupportedReceiverVideoCodecsNames"],[100,42,67,44],[100,44,67,46],[100,50,67,46,"getSupportedReceiverVideoCodecsNames"],[100,51,67,46],[100,56,67,58],[101,8,68,12],[101,15,68,20],[101,16,68,21],[101,22,68,27,"nativeRef"],[101,31,68,36],[101,32,68,37,"current"],[101,39,68,44],[101,41,68,46,"getSupportedReceiverVideoCodecsNames"],[101,77,68,82],[101,78,68,83],[101,79,68,84],[101,84,68,89],[101,86,68,91],[102,6,69,8],[102,7,69,9],[103,6,70,8,"getSupportedReceiverAudioCodecsNames"],[103,42,70,44],[103,44,70,46],[103,50,70,46,"getSupportedReceiverAudioCodecsNames"],[103,51,70,46],[103,56,70,58],[104,8,71,12],[104,15,71,20],[104,16,71,21],[104,22,71,27,"nativeRef"],[104,31,71,36],[104,32,71,37,"current"],[104,39,71,44],[104,41,71,46,"getSupportedReceiverAudioCodecsNames"],[104,77,71,82],[104,78,71,83],[104,79,71,84],[104,84,71,89],[104,86,71,91],[105,6,72,8],[105,7,72,9],[106,6,73,8,"setPreferredReceiverVideoCodecs"],[106,37,73,39],[106,39,73,41],[106,45,73,48,"preferredCodecs"],[106,60,73,63],[106,64,73,68],[107,8,74,12],[107,14,74,18,"nativeRef"],[107,23,74,27],[107,24,74,28,"current"],[107,31,74,35],[107,33,74,37,"setPreferredReceiverVideoCodecs"],[107,64,74,68],[107,65,74,69,"preferredCodecs"],[107,80,74,84],[107,81,74,85],[108,6,75,8],[108,7,75,9],[109,6,76,8,"setPreferredReceiverAudioCodecs"],[109,37,76,39],[109,39,76,41],[109,45,76,48,"preferredCodecs"],[109,60,76,63],[109,64,76,68],[110,8,77,12],[110,14,77,18,"nativeRef"],[110,23,77,27],[110,24,77,28,"current"],[110,31,77,35],[110,33,77,37,"setPreferredReceiverAudioCodecs"],[110,64,77,68],[110,65,77,69,"preferredCodecs"],[110,80,77,84],[110,81,77,85],[111,6,78,8],[111,7,78,9],[112,6,79,8,"startPip"],[112,14,79,16],[112,16,79,18],[112,22,79,18,"startPip"],[112,23,79,18],[112,28,79,30],[113,8,80,12],[113,14,80,18,"nativeRef"],[113,23,80,27],[113,24,80,28,"current"],[113,31,80,35],[113,33,80,37,"startPip"],[113,41,80,45],[113,42,80,46],[113,43,80,47],[114,6,81,8],[114,7,81,9],[115,6,82,8,"stopPip"],[115,13,82,15],[115,15,82,17],[115,21,82,17,"stopPip"],[115,22,82,17],[115,27,82,29],[116,8,83,12],[116,14,83,18,"nativeRef"],[116,23,83,27],[116,24,83,28,"current"],[116,31,83,35],[116,33,83,37,"stopPip"],[116,40,83,44],[116,41,83,45],[116,42,83,46],[117,6,84,8],[117,7,84,9],[118,6,85,8,"togglePip"],[118,15,85,17],[118,17,85,19],[118,23,85,19,"togglePip"],[118,24,85,19],[118,29,85,31],[119,8,86,12],[119,14,86,18,"nativeRef"],[119,23,86,27],[119,24,86,28,"current"],[119,31,86,35],[119,33,86,37,"togglePip"],[119,42,86,46],[119,43,86,47],[119,44,86,48],[120,6,87,8],[121,4,88,4],[121,5,88,5],[121,6,88,6],[121,7,88,7],[122,4,89,4],[122,24,89,11],[122,28,89,11,"_reactJsxDevRuntime"],[122,47,89,11],[122,48,89,11,"jsxDEV"],[122,54,89,11],[122,56,89,12,"NativeView"],[122,66,89,22],[122,68,89,22,"Object"],[122,74,89,22],[122,75,89,22,"assign"],[122,81,89,22],[122,86,89,27,"rest"],[122,90,89,31],[123,6,89,33,"playerType"],[123,16,89,43],[123,18,89,45,"PlayerType"],[123,51,89,55],[123,52,89,55,"PlayerType"],[123,62,89,55],[123,63,89,56,"WHEP"],[123,67,89,61],[124,6,89,62,"ref"],[124,9,89,65],[124,11,89,67,"nativeRef"],[125,4,89,77],[126,6,89,77,"fileName"],[126,14,89,77],[126,16,89,77,"_jsxFileName"],[126,28,89,77],[127,6,89,77,"lineNumber"],[127,16,89,77],[128,6,89,77,"columnNumber"],[128,18,89,77],[129,4,89,77],[129,11,89,78],[129,12,89,79],[130,2,90,0],[131,0,90,1],[131,3]],"functionMap":{"names":["<global>","WhepClientView","React.useImperativeHandle$argument_1","createWhepClient","Promise$argument_0","setTimeout$argument_0","nativeRef.current.createWhepClient.then$argument_0","nativeRef.current.createWhepClient.then._catch$argument_0","connect","disconnect","pause","unpause","getSupportedReceiverVideoCodecsNames","getSupportedReceiverAudioCodecsNames","setPreferredReceiverVideoCodecs","setPreferredReceiverAudioCodecs","startPip","stopPip","togglePip"],"mappings":"AAA;OCc;mCCyB;0BCC;+BCC;2BCC;8BCG;qBDE;+BEC;qBFE;iBDC;aDC;SDC;iBMC;SNE;oBOC;SPE;eQC;SRE;iBSC;STE;8CUC;SVE;8CWC;SXE;yCYC;SZE;yCaC;SbE;kBcC;SdE;iBeC;SfE;mBgBC;ShBE;MDC;CDE"},"hasCjsExports":false},"type":"js/module"}]}
{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"API_BASE\", {\n    enumerable: true,\n    get: function () {\n      return API_BASE;\n    }\n  });\n  exports.apiGet = apiGet;\n  exports.apiPost = apiPost;\n  exports.followUser = followUser;\n  exports.unfollowUser = unfollowUser;\n  exports.getFollowStatus = getFollowStatus;\n  exports.presenceWatch = presenceWatch;\n  exports.presenceLeave = presenceLeave;\n  exports.getEventPresence = getEventPresence;\n  const BASE = process.env.EXPO_BACKEND_URL || process.env.EXPO_PUBLIC_BACKEND_URL || \"\";\n  const API_BASE = BASE.endsWith(\"/\") ? BASE.slice(0, -1) : BASE;\n  function buildUrl(path) {\n    if (!path.startsWith(\"/\")) path = `/${path}`;\n    return `${API_BASE}${path}`;\n  }\n  async function apiGet(path) {\n    const res = await fetch(buildUrl(path));\n    if (!res.ok) throw new Error(`${res.status}`);\n    return res.json();\n  }\n  async function apiPost(path, body, init) {\n    const res = await fetch(buildUrl(path), {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(init?.headers || {})\n      },\n      body: body ? JSON.stringify(body) : undefined,\n      ...(init || {})\n    });\n    if (!res.ok) throw new Error(`${res.status}`);\n    return res.json();\n  }\n\n  // Social graph\n  async function followUser(followerId, followingId) {\n    return apiPost(\"/api/follows\", {\n      follower_id: followerId,\n      following_id: followingId,\n      action: \"follow\"\n    });\n  }\n  async function unfollowUser(followerId, followingId) {\n    return apiPost(\"/api/follows\", {\n      follower_id: followerId,\n      following_id: followingId,\n      action: \"unfollow\"\n    });\n  }\n  async function getFollowStatus(followerId, followingId) {\n    return apiGet(`/api/follows/status?follower_id=${encodeURIComponent(followerId)}&following_id=${encodeURIComponent(followingId)}`);\n  }\n\n  // Presence\n  async function presenceWatch(userId, eventId) {\n    return apiPost(\"/api/presence/watch\", {\n      user_id: userId,\n      event_id: eventId\n    });\n  }\n  async function presenceLeave(userId, eventId) {\n    return apiPost(\"/api/presence/leave\", {\n      user_id: userId,\n      event_id: eventId\n    });\n  }\n  async function getEventPresence(eventId, userId) {\n    const q = userId ? `?user_id=${encodeURIComponent(userId)}` : \"\";\n    return apiGet(`/api/events/${eventId}/presence${q}`);\n  }\n});","lineCount":82,"map":[[7,2,2,0,"Object"],[7,8,2,0],[7,9,2,0,"defineProperty"],[7,23,2,0],[7,24,2,0,"exports"],[7,31,2,0],[8,4,2,0,"enumerable"],[8,14,2,0],[9,4,2,0,"get"],[9,7,2,0],[9,18,2,0,"get"],[9,19,2,0],[10,6,2,0],[10,13,2,0,"API_BASE"],[10,21,2,0],[11,4,2,0],[12,2,2,0],[13,2,9,0,"exports"],[13,9,9,0],[13,10,9,0,"apiGet"],[13,16,9,0],[13,19,9,0,"apiGet"],[13,25,9,0],[14,2,15,0,"exports"],[14,9,15,0],[14,10,15,0,"apiPost"],[14,17,15,0],[14,20,15,0,"apiPost"],[14,27,15,0],[15,2,27,0,"exports"],[15,9,27,0],[15,10,27,0,"followUser"],[15,20,27,0],[15,23,27,0,"followUser"],[15,33,27,0],[16,2,30,0,"exports"],[16,9,30,0],[16,10,30,0,"unfollowUser"],[16,22,30,0],[16,25,30,0,"unfollowUser"],[16,37,30,0],[17,2,33,0,"exports"],[17,9,33,0],[17,10,33,0,"getFollowStatus"],[17,25,33,0],[17,28,33,0,"getFollowStatus"],[17,43,33,0],[18,2,38,0,"exports"],[18,9,38,0],[18,10,38,0,"presenceWatch"],[18,23,38,0],[18,26,38,0,"presenceWatch"],[18,39,38,0],[19,2,41,0,"exports"],[19,9,41,0],[19,10,41,0,"presenceLeave"],[19,23,41,0],[19,26,41,0,"presenceLeave"],[19,39,41,0],[20,2,44,0,"exports"],[20,9,44,0],[20,10,44,0,"getEventPresence"],[20,26,44,0],[20,29,44,0,"getEventPresence"],[20,45,44,0],[21,2,1,0],[21,8,1,6,"BASE"],[21,12,1,10],[21,15,1,13,"process"],[21,22,1,20],[21,23,1,21,"env"],[21,26,1,24],[21,27,1,25,"EXPO_BACKEND_URL"],[21,43,1,41],[21,47,1,45,"process"],[21,54,1,52],[21,55,1,53,"env"],[21,58,1,56],[21,59,1,57,"EXPO_PUBLIC_BACKEND_URL"],[21,82,1,80],[21,86,1,84],[21,88,1,86],[22,2,2,7],[22,8,2,13,"API_BASE"],[22,16,2,21],[22,19,2,24,"BASE"],[22,23,2,28],[22,24,2,29,"endsWith"],[22,32,2,37],[22,33,2,38],[22,36,2,41],[22,37,2,42],[22,40,2,45,"BASE"],[22,44,2,49],[22,45,2,50,"slice"],[22,50,2,55],[22,51,2,56],[22,52,2,57],[22,54,2,59],[22,55,2,60],[22,56,2,61],[22,57,2,62],[22,60,2,65,"BASE"],[22,64,2,69],[23,2,4,0],[23,11,4,9,"buildUrl"],[23,19,4,17,"buildUrl"],[23,20,4,18,"path"],[23,24,4,30],[23,26,4,32],[24,4,5,2],[24,8,5,6],[24,9,5,7,"path"],[24,13,5,11],[24,14,5,12,"startsWith"],[24,24,5,22],[24,25,5,23],[24,28,5,26],[24,29,5,27],[24,31,5,29,"path"],[24,35,5,33],[24,38,5,36],[24,42,5,40,"path"],[24,46,5,44],[24,48,5,46],[25,4,6,2],[25,11,6,9],[25,14,6,12,"API_BASE"],[25,22,6,20],[25,25,6,23,"path"],[25,29,6,27],[25,31,6,29],[26,2,7,0],[27,2,9,7],[27,17,9,22,"apiGet"],[27,23,9,28,"apiGet"],[27,24,9,32,"path"],[27,28,9,44],[27,30,9,58],[28,4,10,2],[28,10,10,8,"res"],[28,13,10,11],[28,16,10,14],[28,22,10,20,"fetch"],[28,27,10,25],[28,28,10,26,"buildUrl"],[28,36,10,34],[28,37,10,35,"path"],[28,41,10,39],[28,42,10,40],[28,43,10,41],[29,4,11,2],[29,8,11,6],[29,9,11,7,"res"],[29,12,11,10],[29,13,11,11,"ok"],[29,15,11,13],[29,17,11,15],[29,23,11,21],[29,27,11,25,"Error"],[29,32,11,30],[29,33,11,31],[29,36,11,34,"res"],[29,39,11,37],[29,40,11,38,"status"],[29,46,11,44],[29,48,11,46],[29,49,11,47],[30,4,12,2],[30,11,12,9,"res"],[30,14,12,12],[30,15,12,13,"json"],[30,19,12,17],[30,20,12,18],[30,21,12,19],[31,2,13,0],[32,2,15,7],[32,17,15,22,"apiPost"],[32,24,15,29,"apiPost"],[32,25,15,39,"path"],[32,29,15,51],[32,31,15,53,"body"],[32,35,15,63],[32,37,15,65,"init"],[32,41,15,83],[32,43,15,97],[33,4,16,2],[33,10,16,8,"res"],[33,13,16,11],[33,16,16,14],[33,22,16,20,"fetch"],[33,27,16,25],[33,28,16,26,"buildUrl"],[33,36,16,34],[33,37,16,35,"path"],[33,41,16,39],[33,42,16,40],[33,44,16,42],[34,6,17,4,"method"],[34,12,17,10],[34,14,17,12],[34,20,17,18],[35,6,18,4,"headers"],[35,13,18,11],[35,15,18,13],[36,8,18,15],[36,22,18,29],[36,24,18,31],[36,42,18,49],[37,8,18,51],[37,12,18,55,"init"],[37,16,18,59],[37,18,18,61,"headers"],[37,25,18,68],[37,29,18,72],[37,30,18,73],[37,31,18,74],[38,6,18,76],[38,7,18,77],[39,6,19,4,"body"],[39,10,19,8],[39,12,19,10,"body"],[39,16,19,14],[39,19,19,17,"JSON"],[39,23,19,21],[39,24,19,22,"stringify"],[39,33,19,31],[39,34,19,32,"body"],[39,38,19,36],[39,39,19,37],[39,42,19,40,"undefined"],[39,51,19,49],[40,6,20,4],[40,10,20,8,"init"],[40,14,20,12],[40,18,20,16],[40,19,20,17],[40,20,20,18],[41,4,21,2],[41,5,21,3],[41,6,21,4],[42,4,22,2],[42,8,22,6],[42,9,22,7,"res"],[42,12,22,10],[42,13,22,11,"ok"],[42,15,22,13],[42,17,22,15],[42,23,22,21],[42,27,22,25,"Error"],[42,32,22,30],[42,33,22,31],[42,36,22,34,"res"],[42,39,22,37],[42,40,22,38,"status"],[42,46,22,44],[42,48,22,46],[42,49,22,47],[43,4,23,2],[43,11,23,9,"res"],[43,14,23,12],[43,15,23,13,"json"],[43,19,23,17],[43,20,23,18],[43,21,23,19],[44,2,24,0],[46,2,26,0],[47,2,27,7],[47,17,27,22,"followUser"],[47,27,27,32,"followUser"],[47,28,27,33,"followerId"],[47,38,27,51],[47,40,27,53,"followingId"],[47,51,27,72],[47,53,27,74],[48,4,28,2],[48,11,28,9,"apiPost"],[48,18,28,16],[48,19,28,17],[48,33,28,31],[48,35,28,33],[49,6,28,35,"follower_id"],[49,17,28,46],[49,19,28,48,"followerId"],[49,29,28,58],[50,6,28,60,"following_id"],[50,18,28,72],[50,20,28,74,"followingId"],[50,31,28,85],[51,6,28,87,"action"],[51,12,28,93],[51,14,28,95],[52,4,28,104],[52,5,28,105],[52,6,28,106],[53,2,29,0],[54,2,30,7],[54,17,30,22,"unfollowUser"],[54,29,30,34,"unfollowUser"],[54,30,30,35,"followerId"],[54,40,30,53],[54,42,30,55,"followingId"],[54,53,30,74],[54,55,30,76],[55,4,31,2],[55,11,31,9,"apiPost"],[55,18,31,16],[55,19,31,17],[55,33,31,31],[55,35,31,33],[56,6,31,35,"follower_id"],[56,17,31,46],[56,19,31,48,"followerId"],[56,29,31,58],[57,6,31,60,"following_id"],[57,18,31,72],[57,20,31,74,"followingId"],[57,31,31,85],[58,6,31,87,"action"],[58,12,31,93],[58,14,31,95],[59,4,31,106],[59,5,31,107],[59,6,31,108],[60,2,32,0],[61,2,33,7],[61,17,33,22,"getFollowStatus"],[61,32,33,37,"getFollowStatus"],[61,33,33,38,"followerId"],[61,43,33,56],[61,45,33,58,"followingId"],[61,56,33,77],[61,58,33,79],[62,4,34,2],[62,11,34,9,"apiGet"],[62,17,34,15],[62,18,34,40],[62,53,34,75,"encodeURIComponent"],[62,71,34,93],[62,72,34,94,"followerId"],[62,82,34,104],[62,83,34,105],[62,100,34,122,"encodeURIComponent"],[62,118,34,140],[62,119,34,141,"followingId"],[62,130,34,152],[62,131,34,153],[62,133,34,155],[62,134,34,156],[63,2,35,0],[65,2,37,0],[66,2,38,7],[66,17,38,22,"presenceWatch"],[66,30,38,35,"presenceWatch"],[66,31,38,36,"userId"],[66,37,38,50],[66,39,38,52,"eventId"],[66,46,38,67],[66,48,38,69],[67,4,39,2],[67,11,39,9,"apiPost"],[67,18,39,16],[67,19,39,17],[67,40,39,38],[67,42,39,40],[68,6,39,42,"user_id"],[68,13,39,49],[68,15,39,51,"userId"],[68,21,39,57],[69,6,39,59,"event_id"],[69,14,39,67],[69,16,39,69,"eventId"],[70,4,39,77],[70,5,39,78],[70,6,39,79],[71,2,40,0],[72,2,41,7],[72,17,41,22,"presenceLeave"],[72,30,41,35,"presenceLeave"],[72,31,41,36,"userId"],[72,37,41,50],[72,39,41,52,"eventId"],[72,46,41,67],[72,48,41,69],[73,4,42,2],[73,11,42,9,"apiPost"],[73,18,42,16],[73,19,42,17],[73,40,42,38],[73,42,42,40],[74,6,42,42,"user_id"],[74,13,42,49],[74,15,42,51,"userId"],[74,21,42,57],[75,6,42,59,"event_id"],[75,14,42,67],[75,16,42,69,"eventId"],[76,4,42,77],[76,5,42,78],[76,6,42,79],[77,2,43,0],[78,2,44,7],[78,17,44,22,"getEventPresence"],[78,33,44,38,"getEventPresence"],[78,34,44,39,"eventId"],[78,41,44,54],[78,43,44,56,"userId"],[78,49,44,71],[78,51,44,73],[79,4,45,2],[79,10,45,8,"q"],[79,11,45,9],[79,14,45,12,"userId"],[79,20,45,18],[79,23,45,21],[79,35,45,33,"encodeURIComponent"],[79,53,45,51],[79,54,45,52,"userId"],[79,60,45,58],[79,61,45,59],[79,63,45,61],[79,66,45,64],[79,68,45,66],[80,4,46,2],[80,11,46,9,"apiGet"],[80,17,46,15],[80,18,46,90],[80,33,46,105,"eventId"],[80,40,46,112],[80,52,46,124,"q"],[80,53,46,125],[80,55,46,127],[80,56,46,128],[81,2,47,0],[82,0,47,1],[82,3]],"functionMap":{"names":["<global>","buildUrl","apiGet","apiPost","followUser","unfollowUser","getFollowStatus","presenceWatch","presenceLeave","getEventPresence"],"mappings":"AAA;ACG;CDG;OEE;CFI;OGE;CHS;OIG;CJE;OKC;CLE;OMC;CNE;OOG;CPE;OQC;CRE;OSC;CTG"},"hasCjsExports":false},"type":"js/module"}]}
{"dependencies":[{"name":"expo-modules-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":61,"index":61}}],"key":"fU8WLIPqoAGygnPbZ/QJiQQfXEY=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":62},"end":{"line":2,"column":31,"index":93}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./ReactNativeMobileWhepClient.types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":94},"end":{"line":3,"column":66,"index":160}}],"key":"56egNxvbyiTz563/qIEiWchcgMQ=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/node_modules/react-native-whip-whep/build/ReactNativeMobileWhipClientView.js\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  exports.WhipClientView = WhipClientView;\n  var _expoModulesCore = require(_dependencyMap[0], \"expo-modules-core\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var React = _interopNamespace(_react);\n  var _ReactNativeMobileWhepClientTypes = require(_dependencyMap[2], \"./ReactNativeMobileWhepClient.types\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const NativeViewBase = (0, _expoModulesCore.requireNativeViewManager)(\"ReactNativeMobileWhipClientViewModule\");\n  const NativeView = NativeViewBase;\n  /**\n   * A component that renders a native view for WHIP player type.\n   *\n   * This component accepts style and other props defined in\n   * ReactNativeMobileWhipClientViewProps.\n   *\n   * @param {ReactNativeMobileWhipClientViewProps & { ref?: React.Ref<WhipClientViewRef> }} props - The properties to customize the component.\n   * @returns {JSX.Element} The rendered component.\n   */\n  function WhipClientView(props) {\n    const {\n      ref,\n      ...rest\n    } = props;\n    const nativeRef = React.useRef(null);\n    /**\n     * WORKAROUND: Race condition with Expo's ConcurrentFunctionDefinition\n     *\n     * The native view is created on a different queue than the function initialization,\n     * which can cause `initializeCamera` to be called before the view is fully created.\n     *\n     * This results in the following error:\n     * ```\n     * Error: Calling the 'initializeCamera' function has failed\n     *   Caused by: The 1st argument cannot be cast to type View<ReactNativeMobileWhipClientView>\n     *   Caused by: Unable to find the 'ReactNativeMobileWhipClientView' view with tag '122'\n     *   code: 'ERR_ARGUMENT_CAST'\n     * ```\n     *\n     * The `setTimeout(0)` defers execution to the next event loop tick, which seems like enough for the view to be created.\n     *\n     * This is the how they are trying to solving as of writing this comment: https://github.com/expo/expo/blob/3f3ad4f6f9ea096bb003c4345f0a09f2a41b3f25/packages/expo-modules-core/ios/Core/Functions/AsyncFunctionDefinition.swift#L125\n     * This might get fixed in the future and setTimeout won't be needed anymore.\n     */\n    React.useImperativeHandle(ref, () => ({\n      initializeCamera: async options => {\n        return new Promise((resolve, reject) => {\n          setTimeout(() => {\n            nativeRef.current?.initializeCamera(options).then(() => {\n              resolve();\n            }).catch(error => {\n              reject(error);\n            });\n          }, 0);\n        });\n      },\n      connect: async options => {\n        await nativeRef.current?.connect(options);\n      },\n      disconnect: async () => {\n        await nativeRef.current?.disconnect();\n      },\n      switchCamera: async deviceId => {\n        await nativeRef.current?.switchCamera(deviceId);\n      },\n      flipCamera: async () => {\n        await nativeRef.current?.flipCamera();\n      },\n      setPreferredSenderVideoCodecs: async preferredCodecs => {\n        await nativeRef.current?.setPreferredSenderVideoCodecs(preferredCodecs);\n      },\n      setPreferredSenderAudioCodecs: async preferredCodecs => {\n        await nativeRef.current?.setPreferredSenderAudioCodecs(preferredCodecs);\n      },\n      getSupportedSenderVideoCodecsNames: async () => {\n        return (await nativeRef.current?.getSupportedSenderVideoCodecsNames()) ?? [];\n      },\n      getSupportedSenderAudioCodecsNames: async () => {\n        return (await nativeRef.current?.getSupportedSenderAudioCodecsNames()) ?? [];\n      },\n      currentCameraDeviceId: async () => {\n        return (await nativeRef.current?.currentCameraDeviceId()) ?? \"\";\n      }\n    }));\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(NativeView, {\n      ...rest,\n      playerType: _ReactNativeMobileWhepClientTypes.PlayerType.WHIP,\n      ref: nativeRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 12\n    }, this);\n  }\n});","lineCount":115,"map":[[23,2,15,0,"exports"],[23,9,15,0],[23,10,15,0,"WhipClientView"],[23,24,15,0],[23,27,15,0,"WhipClientView"],[23,41,15,0],[24,2,1,0],[24,6,1,0,"_expoModulesCore"],[24,22,1,0],[24,25,1,0,"require"],[24,32,1,0],[24,33,1,0,"_dependencyMap"],[24,47,1,0],[25,2,2,0],[25,6,2,0,"_react"],[25,12,2,0],[25,15,2,0,"require"],[25,22,2,0],[25,23,2,0,"_dependencyMap"],[25,37,2,0],[26,2,2,0],[26,6,2,0,"React"],[26,11,2,0],[26,14,2,0,"_interopNamespace"],[26,31,2,0],[26,32,2,0,"_react"],[26,38,2,0],[27,2,3,0],[27,6,3,0,"_ReactNativeMobileWhepClientTypes"],[27,39,3,0],[27,42,3,0,"require"],[27,49,3,0],[27,50,3,0,"_dependencyMap"],[27,64,3,0],[28,2,3,66],[28,6,3,66,"_reactJsxDevRuntime"],[28,25,3,66],[28,28,3,66,"require"],[28,35,3,66],[28,36,3,66,"_dependencyMap"],[28,50,3,66],[29,2,4,0],[29,8,4,6,"NativeViewBase"],[29,22,4,20],[29,25,4,23],[29,29,4,23,"requireNativeViewManager"],[29,45,4,47],[29,46,4,47,"requireNativeViewManager"],[29,70,4,47],[29,72,4,48],[29,111,4,87],[29,112,4,88],[30,2,5,0],[30,8,5,6,"NativeView"],[30,18,5,16],[30,21,5,19,"NativeViewBase"],[30,35,5,33],[31,2,6,0],[32,0,7,0],[33,0,8,0],[34,0,9,0],[35,0,10,0],[36,0,11,0],[37,0,12,0],[38,0,13,0],[39,0,14,0],[40,2,15,7],[40,11,15,16,"WhipClientView"],[40,25,15,30,"WhipClientView"],[40,26,15,31,"props"],[40,31,15,36],[40,33,15,38],[41,4,16,4],[41,10,16,10],[42,6,16,12,"ref"],[42,9,16,15],[43,6,16,17],[43,9,16,20,"rest"],[44,4,16,25],[44,5,16,26],[44,8,16,29,"props"],[44,13,16,34],[45,4,17,4],[45,10,17,10,"nativeRef"],[45,19,17,19],[45,22,17,22,"React"],[45,27,17,27],[45,28,17,28,"useRef"],[45,34,17,34],[45,35,17,35],[45,39,17,39],[45,40,17,40],[46,4,18,4],[47,0,19,0],[48,0,20,0],[49,0,21,0],[50,0,22,0],[51,0,23,0],[52,0,24,0],[53,0,25,0],[54,0,26,0],[55,0,27,0],[56,0,28,0],[57,0,29,0],[58,0,30,0],[59,0,31,0],[60,0,32,0],[61,0,33,0],[62,0,34,0],[63,0,35,0],[64,0,36,0],[65,4,37,4,"React"],[65,9,37,9],[65,10,37,10,"useImperativeHandle"],[65,29,37,29],[65,30,37,30,"ref"],[65,33,37,33],[65,35,37,35],[65,42,37,42],[66,6,38,8,"initializeCamera"],[66,22,38,24],[66,24,38,26],[66,30,38,33,"options"],[66,37,38,40],[66,41,38,45],[67,8,39,12],[67,15,39,19],[67,19,39,23,"Promise"],[67,26,39,30],[67,27,39,31],[67,28,39,32,"resolve"],[67,35,39,39],[67,37,39,41,"reject"],[67,43,39,47],[67,48,39,52],[68,10,40,16,"setTimeout"],[68,20,40,26],[68,21,40,27],[68,27,40,33],[69,12,41,20,"nativeRef"],[69,21,41,29],[69,22,41,30,"current"],[69,29,41,37],[69,31,42,26,"initializeCamera"],[69,47,42,42],[69,48,42,43,"options"],[69,55,42,50],[69,56,42,51],[69,57,43,25,"then"],[69,61,43,29],[69,62,43,30],[69,68,43,36],[70,14,44,24,"resolve"],[70,21,44,31],[70,22,44,32],[70,23,44,33],[71,12,45,20],[71,13,45,21],[71,14,45,22],[71,15,46,25,"catch"],[71,20,46,30],[71,21,46,32,"error"],[71,26,46,37],[71,30,46,42],[72,14,47,24,"reject"],[72,20,47,30],[72,21,47,31,"error"],[72,26,47,36],[72,27,47,37],[73,12,48,20],[73,13,48,21],[73,14,48,22],[74,10,49,16],[74,11,49,17],[74,13,49,19],[74,14,49,20],[74,15,49,21],[75,8,50,12],[75,9,50,13],[75,10,50,14],[76,6,51,8],[76,7,51,9],[77,6,52,8,"connect"],[77,13,52,15],[77,15,52,17],[77,21,52,24,"options"],[77,28,52,31],[77,32,52,36],[78,8,53,12],[78,14,53,18,"nativeRef"],[78,23,53,27],[78,24,53,28,"current"],[78,31,53,35],[78,33,53,37,"connect"],[78,40,53,44],[78,41,53,45,"options"],[78,48,53,52],[78,49,53,53],[79,6,54,8],[79,7,54,9],[80,6,55,8,"disconnect"],[80,16,55,18],[80,18,55,20],[80,24,55,20,"disconnect"],[80,25,55,20],[80,30,55,32],[81,8,56,12],[81,14,56,18,"nativeRef"],[81,23,56,27],[81,24,56,28,"current"],[81,31,56,35],[81,33,56,37,"disconnect"],[81,43,56,47],[81,44,56,48],[81,45,56,49],[82,6,57,8],[82,7,57,9],[83,6,58,8,"switchCamera"],[83,18,58,20],[83,20,58,22],[83,26,58,29,"deviceId"],[83,34,58,37],[83,38,58,42],[84,8,59,12],[84,14,59,18,"nativeRef"],[84,23,59,27],[84,24,59,28,"current"],[84,31,59,35],[84,33,59,37,"switchCamera"],[84,45,59,49],[84,46,59,50,"deviceId"],[84,54,59,58],[84,55,59,59],[85,6,60,8],[85,7,60,9],[86,6,61,8,"flipCamera"],[86,16,61,18],[86,18,61,20],[86,24,61,20,"flipCamera"],[86,25,61,20],[86,30,61,32],[87,8,62,12],[87,14,62,18,"nativeRef"],[87,23,62,27],[87,24,62,28,"current"],[87,31,62,35],[87,33,62,37,"flipCamera"],[87,43,62,47],[87,44,62,48],[87,45,62,49],[88,6,63,8],[88,7,63,9],[89,6,64,8,"setPreferredSenderVideoCodecs"],[89,35,64,37],[89,37,64,39],[89,43,64,46,"preferredCodecs"],[89,58,64,61],[89,62,64,66],[90,8,65,12],[90,14,65,18,"nativeRef"],[90,23,65,27],[90,24,65,28,"current"],[90,31,65,35],[90,33,65,37,"setPreferredSenderVideoCodecs"],[90,62,65,66],[90,63,65,67,"preferredCodecs"],[90,78,65,82],[90,79,65,83],[91,6,66,8],[91,7,66,9],[92,6,67,8,"setPreferredSenderAudioCodecs"],[92,35,67,37],[92,37,67,39],[92,43,67,46,"preferredCodecs"],[92,58,67,61],[92,62,67,66],[93,8,68,12],[93,14,68,18,"nativeRef"],[93,23,68,27],[93,24,68,28,"current"],[93,31,68,35],[93,33,68,37,"setPreferredSenderAudioCodecs"],[93,62,68,66],[93,63,68,67,"preferredCodecs"],[93,78,68,82],[93,79,68,83],[94,6,69,8],[94,7,69,9],[95,6,70,8,"getSupportedSenderVideoCodecsNames"],[95,40,70,42],[95,42,70,44],[95,48,70,44,"getSupportedSenderVideoCodecsNames"],[95,49,70,44],[95,54,70,56],[96,8,71,12],[96,15,71,20],[96,16,71,21],[96,22,71,27,"nativeRef"],[96,31,71,36],[96,32,71,37,"current"],[96,39,71,44],[96,41,71,46,"getSupportedSenderVideoCodecsNames"],[96,75,71,80],[96,76,71,81],[96,77,71,82],[96,82,71,87],[96,84,71,89],[97,6,72,8],[97,7,72,9],[98,6,73,8,"getSupportedSenderAudioCodecsNames"],[98,40,73,42],[98,42,73,44],[98,48,73,44,"getSupportedSenderAudioCodecsNames"],[98,49,73,44],[98,54,73,56],[99,8,74,12],[99,15,74,20],[99,16,74,21],[99,22,74,27,"nativeRef"],[99,31,74,36],[99,32,74,37,"current"],[99,39,74,44],[99,41,74,46,"getSupportedSenderAudioCodecsNames"],[99,75,74,80],[99,76,74,81],[99,77,74,82],[99,82,74,87],[99,84,74,89],[100,6,75,8],[100,7,75,9],[101,6,76,8,"currentCameraDeviceId"],[101,27,76,29],[101,29,76,31],[101,35,76,31,"currentCameraDeviceId"],[101,36,76,31],[101,41,76,43],[102,8,77,12],[102,15,77,19],[102,16,77,20],[102,22,77,26,"nativeRef"],[102,31,77,35],[102,32,77,36,"current"],[102,39,77,43],[102,41,77,45,"currentCameraDeviceId"],[102,62,77,66],[102,63,77,67],[102,64,77,68],[102,69,77,73],[102,71,77,75],[103,6,78,8],[104,4,79,4],[104,5,79,5],[104,6,79,6],[104,7,79,7],[105,4,80,4],[105,24,80,11],[105,28,80,11,"_reactJsxDevRuntime"],[105,47,80,11],[105,48,80,11,"jsxDEV"],[105,54,80,11],[105,56,80,12,"NativeView"],[105,66,80,22],[106,6,80,22],[106,9,80,27,"rest"],[106,13,80,31],[107,6,80,33,"playerType"],[107,16,80,43],[107,18,80,45,"PlayerType"],[107,51,80,55],[107,52,80,55,"PlayerType"],[107,62,80,55],[107,63,80,56,"WHIP"],[107,67,80,61],[108,6,80,62,"ref"],[108,9,80,65],[108,11,80,67,"nativeRef"],[109,4,80,77],[110,6,80,77,"fileName"],[110,14,80,77],[110,16,80,77,"_jsxFileName"],[110,28,80,77],[111,6,80,77,"lineNumber"],[111,16,80,77],[112,6,80,77,"columnNumber"],[112,18,80,77],[113,4,80,77],[113,11,80,78],[113,12,80,79],[114,2,81,0],[115,0,81,1],[115,3]],"functionMap":{"names":["<global>","WhipClientView","React.useImperativeHandle$argument_1","initializeCamera","Promise$argument_0","setTimeout$argument_0","nativeRef.current.initializeCamera.then$argument_0","nativeRef.current.initializeCamera.then._catch$argument_0","connect","disconnect","switchCamera","flipCamera","setPreferredSenderVideoCodecs","setPreferredSenderAudioCodecs","getSupportedSenderVideoCodecsNames","getSupportedSenderAudioCodecsNames","currentCameraDeviceId"],"mappings":"AAA;OCc;mCCsB;0BCC;+BCC;2BCC;8BCG;qBDE;+BEC;qBFE;iBDC;aDC;SDC;iBMC;SNE;oBOC;SPE;sBQC;SRE;oBSC;STE;uCUC;SVE;uCWC;SXE;4CYC;SZE;4CaC;SbE;+BcC;SdE;MDC;CDE"},"hasCjsExports":false},"type":"js/module"}]}